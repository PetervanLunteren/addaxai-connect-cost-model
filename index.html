<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AddaxAI-Connect Cost Calculator</title>
<style>
  :root {
    --teal-900: #063e42;
    --teal-800: #094f54;
    --teal-700: #0b5f65;
    --teal-600: #0e7a82;
    --teal-500: #12949d;
    --teal-400: #2db3bc;
    --teal-300: #6dcdd4;
    --teal-200: #a8e1e5;
    --teal-100: #d8f2f4;
    --teal-50: #eef9fa;
    --amber-500: #d4a030;
    --amber-100: #fef3cd;
    --gray-50: #f8fafb;
    --gray-100: #f0f2f4;
    --gray-200: #e2e5e8;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    --radius: 8px;
    --shadow: 0 1px 3px rgba(0,0,0,.1), 0 1px 2px rgba(0,0,0,.06);
    --shadow-md: 0 4px 6px rgba(0,0,0,.07), 0 2px 4px rgba(0,0,0,.06);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    color: var(--gray-800);
    background: var(--gray-50);
    line-height: 1.5;
  }

  header {
    background: white;
    color: var(--teal-900);
    padding: 2rem 1.5rem 1.5rem;
    text-align: center;
    border-bottom: 3px solid var(--teal-700);
  }

  header img {
    height: 50px;
    margin-bottom: .75rem;
  }

  header h1 {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--teal-700);
    margin-bottom: .25rem;
  }

  header p {
    color: var(--gray-600);
    font-size: .95rem;
    max-width: 540px;
    margin: 0 auto;
  }

  header a { color: var(--teal-700); }

  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 1.5rem;
  }

  .grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }

  @media (max-width: 768px) {
    .grid { grid-template-columns: 1fr; }
  }

  /* Modal */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.4);
    z-index: 100;
    justify-content: center;
    align-items: center;
  }

  .modal-overlay.open { display: flex; }

  .modal {
    background: white;
    border-radius: var(--radius);
    box-shadow: 0 20px 60px rgba(0,0,0,.2);
    max-width: 520px;
    width: 90%;
    max-height: 85vh;
    overflow-y: auto;
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: .75rem 1.25rem;
    background: var(--teal-700);
    color: white;
    font-weight: 600;
    font-size: .9rem;
    border-radius: var(--radius) var(--radius) 0 0;
  }

  .modal-close {
    background: none;
    border: none;
    color: white;
    font-size: 1.25rem;
    cursor: pointer;
    padding: 0 .25rem;
    line-height: 1;
    opacity: .8;
  }

  .modal-close:hover { opacity: 1; }

  .modal-body { padding: .5rem; }

  .prices-link {
    display: inline-block;
    margin-top: 1rem;
    font-size: .85rem;
    color: var(--teal-700);
    cursor: pointer;
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .prices-link:hover { color: var(--teal-900); }

  .card {
    background: white;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
  }

  .card-header {
    padding: .75rem 1.25rem;
    font-weight: 600;
    font-size: .9rem;
    border-bottom: 1px solid var(--gray-200);
  }

  .card-header.green {
    background: var(--teal-700);
    color: white;
  }

  .card-header.dark {
    background: var(--teal-900);
    color: white;
  }

  .card-body { padding: 1rem 1.25rem; }

  /* Input rows */
  .input-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .5rem 0;
    border-bottom: 1px solid var(--gray-100);
  }

  .input-row:last-child { border-bottom: none; }

  .input-row label {
    font-size: .875rem;
    color: var(--gray-700);
    flex: 1;
  }

  .input-row label .caption {
    display: block;
    font-size: .75rem;
    color: var(--gray-500);
    font-weight: 400;
    margin-top: .1rem;
  }

  .input-row .desc {
    font-size: .75rem;
    color: var(--gray-500);
  }

  .input-row input {
    width: 90px;
    text-align: right;
    padding: .35rem .5rem;
    border: 1px solid var(--gray-200);
    border-radius: 4px;
    font-size: .875rem;
    color: var(--gray-800);
    background: var(--gray-50);
    transition: border-color .15s;
  }

  .input-row input:focus {
    outline: none;
    border-color: var(--teal-500);
    box-shadow: 0 0 0 3px rgba(65,153,102,.15);
  }

  .unit {
    font-size: .75rem;
    color: var(--gray-400);
    width: 80px;
    text-align: right;
    margin-left: .5rem;
  }

  /* Cost input table */
  .cost-table {
    width: 100%;
    border-collapse: collapse;
    font-size: .8rem;
  }

  .cost-table th {
    text-align: left;
    padding: .4rem .5rem;
    background: var(--gray-100);
    color: var(--gray-600);
    font-weight: 600;
    font-size: .7rem;
    text-transform: uppercase;
    letter-spacing: .03em;
  }

  .cost-table td {
    padding: .4rem .5rem;
    border-bottom: 1px solid var(--gray-100);
    vertical-align: middle;
  }

  .cost-table tr:last-child td { border-bottom: none; }

  .cost-table .price {
    text-align: right;
    font-variant-numeric: tabular-nums;
    font-weight: 600;
    color: var(--gray-800);
  }

  /* Output table */
  .output-table {
    width: 100%;
    border-collapse: collapse;
    font-size: .85rem;
  }

  .output-table th {
    text-align: left;
    padding: .5rem .75rem;
    background: var(--teal-50);
    color: var(--teal-800);
    font-weight: 600;
    font-size: .75rem;
    text-transform: uppercase;
    letter-spacing: .03em;
  }

  .output-table th:nth-child(n+2) { text-align: right; }

  .output-table td {
    padding: .5rem .75rem;
    border-bottom: 1px solid var(--gray-100);
  }

  .output-table td:nth-child(n+3) { text-align: right; font-variant-numeric: tabular-nums; }

  .output-table td:nth-child(2) {
    color: var(--gray-500);
    font-size: .8rem;
  }

  .output-table tr:last-child td { border-bottom: none; }

  .output-table .total-row td {
    font-weight: 700;
    font-size: 1rem;
    background: var(--teal-50);
    border-top: 2px solid var(--teal-300);
    border-bottom: none;
    color: var(--teal-900);
  }

  /* Chart */
  .chart-container {
    padding: 1.25rem;
    display: flex;
    gap: 1.5rem;
    align-items: center;
    flex-wrap: wrap;
    justify-content: center;
  }

  .chart-svg { flex-shrink: 0; }

  .legend {
    display: flex;
    flex-direction: column;
    gap: .35rem;
    font-size: .8rem;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: .5rem;
  }

  .legend-swatch {
    width: 12px;
    height: 12px;
    border-radius: 3px;
    flex-shrink: 0;
  }

  .legend-value {
    margin-left: auto;
    font-variant-numeric: tabular-nums;
    font-weight: 600;
    padding-left: 1rem;
  }

  footer {
    text-align: center;
    padding: 2rem 1rem;
    font-size: .8rem;
    color: var(--gray-500);
  }

  footer a { color: var(--green-600); }

  .full-width { grid-column: 1 / -1; }
</style>
</head>
<body>

<header>
  <img src="logo.png" alt="AddaxAI">
  <h1>AddaxAI-Connect Cost Calculator</h1>
  <p>Estimate the costs for your <a href="https://github.com/PetervanLunteren/AddaxAI-Connect" target="_blank">AddaxAI-Connect</a> wildlife monitoring project.</p>
</header>

<div class="container">

  <!-- Inputs -->
  <div class="grid">
    <div class="card">
      <div class="card-header green">Project parameters</div>
      <div class="card-body">
        <div class="input-row">
          <label>Number of years<span class="caption">Project duration, affects mobile data, software maintenance, server maintenance, and server instance costs</span></label>
          <input type="number" id="years" value="1" min="1" step="1">
        </div>
        <div class="input-row">
          <label>Active cameras<span class="caption">Cameras with an active connection to the system (includes SIM, SD-cards, batteries, configuration)</span></label>
          <input type="number" id="activeCameras" value="25" min="0" step="1">
        </div>
        <div class="input-row">
          <label>Backup cameras<span class="caption">Spare cameras without an active connection, no SIM or configuration costs</span></label>
          <input type="number" id="backupCameras" value="10" min="0" step="1">
        </div>
        <div class="input-row">
          <label>Enclosures<span class="caption">Optional protective camera housings</span></label>
          <input type="number" id="enclosures" value="0" min="0" step="1">
        </div>
        <div class="input-row">
          <label>Training sessions<span class="caption">Onboarding sessions to walk through the platform, settings, and workflows</span></label>
          <input type="number" id="trainingSessions" value="2" min="0" step="1">
        </div>
        <div class="input-row">
          <label>Days of software development<span class="caption">Usually not needed, can be included for custom features or integrations</span></label>
          <input type="number" id="devDays" value="5" min="0" step="1">
        </div>
        <span class="prices-link" id="openModal">View unit prices</span>
      </div>
    </div>

  </div>

  <!-- Unit prices modal -->
  <div class="modal-overlay" id="pricesModal">
    <div class="modal">
      <div class="modal-header">
        Unit prices
        <button class="modal-close" id="closeModal">&times;</button>
      </div>
      <div class="modal-body">
        <table class="cost-table">
          <thead>
            <tr><th>Item</th><th>Price (&euro;)</th><th>Type</th></tr>
          </thead>
          <tbody>
            <tr><td>Camera</td><td class="price">&euro; 130</td><td class="desc">per camera</td></tr>
            <tr><td>Enclosure</td><td class="price">&euro; 25</td><td class="desc">per enclosure</td></tr>
            <tr><td>Configuration</td><td class="price">&euro; 25</td><td class="desc">per camera</td></tr>
            <tr><td>Logistics</td><td class="price">&euro; 10</td><td class="desc">per camera</td></tr>
            <tr><td>SD-card (two sets)</td><td class="price">&euro; 20</td><td class="desc">per camera</td></tr>
            <tr><td>Batteries (two sets)</td><td class="price">&euro; 100</td><td class="desc">per camera</td></tr>
            <tr><td>Mobile data (SIM)</td><td class="price">&euro; 5</td><td class="desc">per camera / month</td></tr>
            <tr><td>Camera management</td><td class="price">&euro; 0</td><td class="desc">per camera / year</td></tr>
            <tr><td>Battery charger</td><td class="price">&euro; 50</td><td class="desc">per project</td></tr>
            <tr><td>Software setup</td><td class="price">&euro; 1,000</td><td class="desc">per project</td></tr>
            <tr><td>Software maintenance</td><td class="price">&euro; 250</td><td class="desc">per project / month</td></tr>
            <tr><td>Software development</td><td class="price">&euro; 1,000</td><td class="desc">per day</td></tr>
            <tr><td>Server setup</td><td class="price">&euro; 1,000</td><td class="desc">per project</td></tr>
            <tr><td>Server maintenance</td><td class="price">&euro; 250</td><td class="desc">per project / month</td></tr>
            <tr><td>Server instance</td><td class="price">&euro; 100</td><td class="desc">per project / month</td></tr>
            <tr><td>Training session</td><td class="price">&euro; 1,000</td><td class="desc">per session</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Output -->
  <div class="grid">
    <div class="card full-width">
      <div class="card-header dark">Cost breakdown</div>
      <div class="card-body" style="padding:0">
        <table class="output-table">
          <thead>
            <tr><th>Description</th><th>Basis</th><th style="text-align:right">Unit price</th><th style="text-align:right">Quantity</th><th style="text-align:right">Total</th></tr>
          </thead>
          <tbody id="outputBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Chart -->
  <div class="grid">
    <div class="card full-width">
      <div class="card-header dark">Cost distribution</div>
      <div class="chart-container">
        <svg id="donut" class="chart-svg" width="220" height="220" viewBox="0 0 220 220"></svg>
        <div id="legend" class="legend"></div>
      </div>
    </div>
  </div>

</div>

<footer>
  <a href="https://github.com/PetervanLunteren/AddaxAI-Connect" target="_blank">AddaxAI-Connect</a> &mdash; Automated wildlife monitoring
</footer>

<script>
(function () {
  const $ = id => document.getElementById(id);
  const val = id => parseFloat($(id).value) || 0;
  const eur = n => n.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

  // Fixed unit prices
  const P = {
    camera: 130, enclosure: 25, config: 25, logistics: 10,
    sd: 20, batteries: 100, sim: 5, camMgmt: 0, charger: 50,
    swSetup: 1000, swMaint: 250, swDev: 1000,
    srvSetup: 1000, srvMaint: 250, srvInstance: 100, training: 1000
  };

  const COLORS = [
    '#0b5f65','#0e7a82','#12949d','#2db3bc','#6dcdd4',
    '#d4a030','#e8be5a','#f0d68a','#063e42','#094f54',
    '#3ec0c8','#a8e1e5','#92702a','#b8963c','#c9ae60',
    '#48c5cd','#78d4da'
  ];

  function calculate() {
    const years     = val('years');
    const active    = val('activeCameras');
    const backup    = val('backupCameras');
    const enclCount = val('enclosures');
    const sessions  = val('trainingSessions');
    const devDays   = val('devDays');
    const months    = years * 12;

    const rows = [
      { name: 'Active cameras',                unit: P.camera,              basis: 'Per item',          qty: active },
      { name: 'Backup cameras',                unit: P.camera,              basis: 'Per item',          qty: backup },
      { name: 'Enclosures',                    unit: P.enclosure,           basis: 'Per item',          qty: enclCount },
      { name: 'Battery charger',               unit: P.charger,             basis: 'Per project',       qty: 1 },
      { name: 'SD-cards (two sets)',            unit: P.sd,                  basis: 'Per active camera', qty: active },
      { name: 'Batteries (two sets)',           unit: P.batteries,           basis: 'Per active camera', qty: active },
      { name: 'Logistics',                     unit: P.logistics,           basis: 'Per item',          qty: active + backup },
      { name: 'Mobile data (SIM-card)',         unit: P.sim * months,        basis: 'Per active camera', qty: active },
      { name: 'Camera configuration',          unit: P.config,              basis: 'Per active camera', qty: active },
      { name: 'Camera placement & management', unit: P.camMgmt * years,     basis: 'Per active camera', qty: active },
      { name: 'Server instance',               unit: P.srvInstance * months, basis: 'Per project',      qty: 1 },
      { name: 'Server setup',                  unit: P.srvSetup,            basis: 'Per project',       qty: 1 },
      { name: 'Server maintenance',            unit: P.srvMaint * months,   basis: 'Per project',       qty: 1 },
      { name: 'Software setup',                unit: P.swSetup,             basis: 'Per project',       qty: 1 },
      { name: 'Software maintenance',          unit: P.swMaint * months,    basis: 'Per project',       qty: 1 },
      { name: 'Software development',          unit: P.swDev,               basis: 'Per day',           qty: devDays },
      { name: 'Training',                      unit: P.training,            basis: 'Per session',       qty: sessions },
    ];

    rows.forEach(r => r.total = r.unit * r.qty);
    const grandTotal = rows.reduce((s, r) => s + r.total, 0);

    // Render output table
    const tbody = $('outputBody');
    tbody.innerHTML = rows.map(r =>
      `<tr>
        <td>${r.name}</td>
        <td>${r.basis}</td>
        <td style="text-align:right">&euro; ${eur(r.unit)}</td>
        <td style="text-align:right">${r.qty}</td>
        <td style="text-align:right">&euro; ${eur(r.total)}</td>
      </tr>`
    ).join('') +
      `<tr class="total-row">
        <td colspan="4">Total</td>
        <td style="text-align:right">&euro; ${eur(grandTotal)}</td>
      </tr>`;

    // Render donut chart â€” group small slices into "Other"
    const nonZero = rows.filter(r => r.total > 0);
    const threshold = grandTotal * 0.03;
    let chartData = [];
    let otherTotal = 0;

    nonZero.forEach((r, i) => {
      if (r.total < threshold) {
        otherTotal += r.total;
      } else {
        chartData.push({ name: r.name, value: r.total, color: COLORS[i % COLORS.length] });
      }
    });
    if (otherTotal > 0) {
      chartData.push({ name: 'Other', value: otherTotal, color: '#9ca3af' });
    }

    const svg = $('donut');
    const legend = $('legend');

    if (grandTotal === 0) {
      svg.innerHTML = '<text x="110" y="115" text-anchor="middle" fill="#9ca3af" font-size="14">No costs</text>';
      legend.innerHTML = '';
      return;
    }

    const cx = 110, cy = 110, R = 95, r = 55;
    let angle = -Math.PI / 2;
    let paths = '';

    chartData.forEach(d => {
      const frac = d.value / grandTotal;
      const a1 = angle;
      const a2 = angle + frac * 2 * Math.PI;
      const large = frac > 0.5 ? 1 : 0;

      const x1o = cx + R * Math.cos(a1);
      const y1o = cy + R * Math.sin(a1);
      const x2o = cx + R * Math.cos(a2);
      const y2o = cy + R * Math.sin(a2);
      const x1i = cx + r * Math.cos(a2);
      const y1i = cy + r * Math.sin(a2);
      const x2i = cx + r * Math.cos(a1);
      const y2i = cy + r * Math.sin(a1);

      paths += `<path d="M${x1o},${y1o} A${R},${R} 0 ${large} 1 ${x2o},${y2o} L${x1i},${y1i} A${r},${r} 0 ${large} 0 ${x2i},${y2i} Z" fill="${d.color}"/>`;
      angle = a2;
    });

    // Center text
    paths += `<text x="${cx}" y="${cy - 6}" text-anchor="middle" fill="#1f2937" font-size="12" font-weight="600">&euro; ${eur(grandTotal)}</text>`;
    paths += `<text x="${cx}" y="${cy + 12}" text-anchor="middle" fill="#6b7280" font-size="10">total</text>`;

    svg.innerHTML = paths;

    legend.innerHTML = chartData.map(d =>
      `<div class="legend-item">
        <span class="legend-swatch" style="background:${d.color}"></span>
        <span>${d.name}</span>
        <span class="legend-value">&euro; ${eur(d.value)}</span>
      </div>`
    ).join('');
  }

  // Attach listeners to all inputs
  document.querySelectorAll('input[type="number"]').forEach(input => {
    input.addEventListener('input', calculate);
  });

  // Modal
  const modal = $('pricesModal');
  $('openModal').addEventListener('click', () => modal.classList.add('open'));
  $('closeModal').addEventListener('click', () => modal.classList.remove('open'));
  modal.addEventListener('click', e => { if (e.target === modal) modal.classList.remove('open'); });

  // Initial calculation
  calculate();
})();
</script>

</body>
</html>
